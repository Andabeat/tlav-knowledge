
***

# TLAV Glossary Automation

This folder contains a small automation pipeline that keeps the **Thinking Like A Village (TLAV)** glossary up to date and alphabetized with minimal manual work.

The core idea:  
- New glossary entries are generated by an AI assistant (Comet/Perplexity) in a specific Markdown format.  
- Those entries are pasted into `new-terms.md`.  
- A Python script (`update_glossary.py`) merges them into `glossary.md`, deduplicates, sorts, and preserves the human-readable structure.  
- A GitHub Action runs this script automatically whenever `new-terms.md` is updated.

***

## Files and structure

Inside this folder:

- `glossary.md`  
  The master TLAV glossary.  
  - Starts with a header/metadata section (e.g. project info, version).  
  - Followed by entries in this format, one per line with a blank line between:

    ```markdown
    **Term:** Plain-language definition goes here.

    **Another Term:** Another definition here.
    ```

- `new-terms.md`  
  A temporary staging file for new entries.  
  - You paste freshly generated entries here in the same `**Term:** Definition` format.  
  - The file is cleared automatically after each successful run of `update_glossary.py`.

- `update_glossary.py`  
  A Python script that:
  - Preserves the header section at the top of `glossary.md`.  
  - Treats lines starting with `**` as glossary entries.  
  - Reads entries from `glossary.md` and `new-terms.md`.  
  - Merges them, removes exact duplicates, and sorts alphabetically by the term (case-insensitive).  
  - Writes the updated glossary back to `glossary.md` with one blank line between entries.  
  - Empties `new-terms.md` when finished.

At the repo root:

- `.github/workflows/update-glossary.yml`  
  A GitHub Actions workflow that:
  - Triggers on pushes that modify `glossary-automation/new-terms.md`.  
  - Checks out the repo, sets up Python, runs `update_glossary.py` inside `glossary-automation`, and then commits and pushes any changes to `glossary.md` and `new-terms.md`.[1][2]

***

## Daily workflow: how to add new terms

1. **Generate new entries with Comet (or another AI assistant)**  
   - Use your usual extraction shortcut on a TLAV blog post.  
   - Ask the AI to output entries exactly like:

     ```markdown
     **Ancestor Consciousness:** Paying attention to the presence and stories of those who came before us.

     **Village Mindset:** A way of thinking that centers interdependence, care, and shared responsibility.
     ```

   - Requirements:
     - One entry per line.  
     - `**Term:**` at the start of the line.  
     - A blank line between entries.  

2. **Paste into `new-terms.md`**  
   - Open `glossary-automation/new-terms.md` in your local repo.  
   - Overwrite any existing content with today’s new entries.

3. **Commit and push `new-terms.md`**  

   From the repo root (`tlav-knowledge`):

   ```bash
   git add glossary-automation/new-terms.md
   git commit -m "Add new glossary terms"
   git push origin main
   ```

4. **Let GitHub Actions update the glossary**  
   - After the push, go to the **Actions** tab in the GitHub repo.  
   - You should see a workflow run named “Update Glossary.”  
   - If it succeeds:
     - `glossary-automation/glossary.md` is updated with the new, alphabetized entries.  
     - `glossary-automation/new-terms.md` is cleared on GitHub for the next day.  

5. **(Optional) Pull changes locally**  
   - If you want your local copy to match GitHub after the automation runs:

     ```bash
     git pull origin main
     ```

***

## Script behavior (technical notes)

`update_glossary.py` does the following:

1. **Split header and entries in `glossary.md`**
   - Everything before the first line starting with `**` is treated as header/introduction and kept unchanged.  
   - Any non-empty line starting with `**` is treated as a glossary entry.  

2. **Load new entries**
   - Reads `new-terms.md`.  
   - Ignores blank lines and lines starting with `#`.  
   - Assumes every non-empty line is an entry formatted as `**Term:** Definition`.

3. **Merge and sort**
   - Combines old and new entries using a set to remove exact duplicates.  
   - Sorts alphabetically by the term using a case-insensitive key (the text between the first pair of `**` before `:`).[3][4]

4. **Write the updated glossary**
   - Writes the header exactly as it appeared.  
   - Ensures at least one blank line between the header and the first entry.  
   - Writes each entry on its own line, followed by a blank line.

5. **Clear `new-terms.md`**
   - Empties `new-terms.md` so it’s ready for the next batch.

You can also run the script locally for testing:

```bash
cd glossary-automation
python3 update_glossary.py
```

***

## Maintenance and customization

- **Changing file names:**  
  - If you rename `glossary.md` or `new-terms.md`, update the `GLOSSARY_FILE` and `NEW_TERMS_FILE` constants inside `update_glossary.py`.

- **Adjusting the entry format:**  
  - The script currently assumes entries look like `**Term:** Definition`.  
  - If you change this pattern, you’ll also need to update the `extract_term()` function’s regular expression.

- **Workflow trigger:**  
  - The GitHub Action is configured to run when `glossary-automation/new-terms.md` changes.  
  - To trigger on different files or branches, update `on.push.paths` and/or branch settings in `.github/workflows/update-glossary.yml`.[5][1]

***

## Origin and purpose

This automation is part of the **Thinking Like A Village** project, built to maintain a growing, alphabetized glossary while minimizing manual work and copy-paste friction. It is designed to be:

- Beginner-friendly to set up and understand.  
- Transparent and easy to adapt for others who want similar glossary pipelines.  

You are welcome to clone, fork, or extend this pattern in your own repositories.

[1](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions)
[2](https://docs.github.com/actions/managing-workflow-runs/viewing-workflow-run-history)
[3](https://www.geeksforgeeks.org/python/python-ways-to-sort-list-of-strings-in-case-insensitive-manner/)
[4](https://stackoverflow.com/questions/13954841/sort-list-of-strings-ignoring-upper-lower-case)
[5](https://docs.github.com/actions/using-workflows/triggering-a-workflow)